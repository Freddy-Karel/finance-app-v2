"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_action-browser_src_server_actions_envelopes_ts";
exports.ids = ["_action-browser_src_server_actions_envelopes_ts"];
exports.modules = {

/***/ "(action-browser)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentRole: () => (/* binding */ getCurrentRole),\n/* harmony export */   requireRole: () => (/* binding */ requireRole)\n/* harmony export */ });\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(action-browser)/./node_modules/.pnpm/@clerk+nextjs@5.3.1_next@15_20ea36d09dc70bbbcc56b8a0d9ae486b/node_modules/@clerk/nextjs/dist/esm/app-router/server/auth.js\");\n\nasync function getCurrentRole() {\n    if (process.env.E2E_ROLE === \"operator\" || process.env.E2E_ROLE === \"manager\" || process.env.E2E_ROLE === \"auditor\") return process.env.E2E_ROLE;\n    const { userId, sessionClaims } = (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_0__.auth)();\n    if (!userId) throw new Error(\"Unauthenticated\");\n    return sessionClaims?.role ?? \"operator\";\n}\nasync function requireRole(allowed) {\n    const role = await getCurrentRole();\n    if (!allowed.includes(role)) throw new Error(\"Forbidden\");\n    return role;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL3NyYy9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEM7QUFFckMsZUFBZUM7SUFDcEIsSUFBSUMsUUFBUUMsR0FBRyxDQUFDQyxRQUFRLEtBQUssY0FBY0YsUUFBUUMsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYUYsUUFBUUMsR0FBRyxDQUFDQyxRQUFRLEtBQUssV0FBVyxPQUFPRixRQUFRQyxHQUFHLENBQUNDLFFBQVE7SUFDaEosTUFBTSxFQUFFQyxNQUFNLEVBQUVDLGFBQWEsRUFBRSxHQUFHTiwwREFBSUE7SUFBSSxJQUFJLENBQUNLLFFBQVEsTUFBTSxJQUFJRSxNQUFNO0lBQ3ZFLE9BQU8sZUFBZ0JDLFFBQTZCO0FBQ3REO0FBQ08sZUFBZUMsWUFBWUMsT0FBZTtJQUFJLE1BQU1GLE9BQU8sTUFBTVA7SUFBa0IsSUFBSSxDQUFDUyxRQUFRQyxRQUFRLENBQUNILE9BQU8sTUFBTSxJQUFJRCxNQUFNO0lBQWMsT0FBT0M7QUFBTSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCQzI0MVxcTXVzaWNcXGZpbmFuY2UtYXBwLXYxLW1haW5cXGZpbmFuY2UtYXBwLXYxLW1haW5cXHNyY1xcbGliXFxhdXRoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF1dGggfSBmcm9tIFwiQGNsZXJrL25leHRqcy9zZXJ2ZXJcIjtcbmV4cG9ydCB0eXBlIFJvbGUgPSBcIm9wZXJhdG9yXCIgfCBcIm1hbmFnZXJcIiB8IFwiYXVkaXRvclwiO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRSb2xlKCk6IFByb21pc2U8Um9sZT4ge1xuICBpZiAocHJvY2Vzcy5lbnYuRTJFX1JPTEUgPT09IFwib3BlcmF0b3JcIiB8fCBwcm9jZXNzLmVudi5FMkVfUk9MRSA9PT0gXCJtYW5hZ2VyXCIgfHwgcHJvY2Vzcy5lbnYuRTJFX1JPTEUgPT09IFwiYXVkaXRvclwiKSByZXR1cm4gcHJvY2Vzcy5lbnYuRTJFX1JPTEUgYXMgUm9sZTtcbiAgY29uc3QgeyB1c2VySWQsIHNlc3Npb25DbGFpbXMgfSA9IGF1dGgoKTsgaWYgKCF1c2VySWQpIHRocm93IG5ldyBFcnJvcihcIlVuYXV0aGVudGljYXRlZFwiKTtcbiAgcmV0dXJuIChzZXNzaW9uQ2xhaW1zPy5yb2xlIGFzIFJvbGUgfCB1bmRlZmluZWQpID8/IFwib3BlcmF0b3JcIjtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlUm9sZShhbGxvd2VkOiBSb2xlW10pIHsgY29uc3Qgcm9sZSA9IGF3YWl0IGdldEN1cnJlbnRSb2xlKCk7IGlmICghYWxsb3dlZC5pbmNsdWRlcyhyb2xlKSkgdGhyb3cgbmV3IEVycm9yKFwiRm9yYmlkZGVuXCIpOyByZXR1cm4gcm9sZTsgfVxuIl0sIm5hbWVzIjpbImF1dGgiLCJnZXRDdXJyZW50Um9sZSIsInByb2Nlc3MiLCJlbnYiLCJFMkVfUk9MRSIsInVzZXJJZCIsInNlc3Npb25DbGFpbXMiLCJFcnJvciIsInJvbGUiLCJyZXF1aXJlUm9sZSIsImFsbG93ZWQiLCJpbmNsdWRlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(action-browser)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = global.__prisma ??= new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) global.__prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL3NyYy9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQVN2QyxNQUFNQyxTQUFVQyxPQUFPQyxRQUFRLEtBQUssSUFBSUgsd0RBQVlBLEdBQUk7QUFDL0QsSUFBSUksSUFBcUMsRUFBRUYsT0FBT0MsUUFBUSxHQUFHRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCQzI0MVxcTXVzaWNcXGZpbmFuY2UtYXBwLXYxLW1haW5cXGZpbmFuY2UtYXBwLXYxLW1haW5cXHNyY1xcbGliXFxwcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vLyBFbnN1cmUgYSBzaW5nbGUgUHJpc21hQ2xpZW50IGluc3RhbmNlIGluIGRldmVsb3BtZW50IHRvIGF2b2lkIGV4aGF1c3Rpbmdcbi8vIGRhdGFiYXNlIGNvbm5lY3Rpb25zIGR1cmluZyBITVIgKHNlZSBQcmlzbWEgZG9jcykuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcbiAgdmFyIF9fcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSAoZ2xvYmFsLl9fcHJpc21hID8/PSBuZXcgUHJpc21hQ2xpZW50KCkpO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIGdsb2JhbC5fX3ByaXNtYSA9IHByaXNtYTtcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJnbG9iYWwiLCJfX3ByaXNtYSIsInByb2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(action-browser)/./src/server/actions/envelopes.ts":
/*!*****************************************!*\
  !*** ./src/server/actions/envelopes.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnvelopesWithStats: () => (/* binding */ getEnvelopesWithStats)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-server-reference */ \"(action-browser)/./node_modules/.pnpm/next@15.0.3_@playwright+tes_c0fbebec67a33fb30e42c14d3a81a9d2/node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(action-browser)/./node_modules/.pnpm/next@15.0.3_@playwright+tes_c0fbebec67a33fb30e42c14d3a81a9d2/node_modules/next/dist/server/app-render/encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(action-browser)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(action-browser)/./src/lib/auth.ts\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(action-browser)/./node_modules/.pnpm/next@15.0.3_@playwright+tes_c0fbebec67a33fb30e42c14d3a81a9d2/node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"40324aebbf7e747e731eb7bb02015237314be1c552\":\"getEnvelopesWithStats\"} */ \n\n\n\n// Retourne les stats par enveloppe. Si timeMin/timeMax fournis, filtre sur période, sinon agrégat all-time.\nasync function getEnvelopesWithStats(input) {\n    await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.requireRole)([\n        \"operator\",\n        \"manager\",\n        \"auditor\"\n    ]);\n    let useWindow = false;\n    let tMin = undefined;\n    let tMax = undefined;\n    if (input && (input.timeMin || input.timeMax)) {\n        useWindow = true;\n        tMin = input.timeMin ? new Date(input.timeMin) : new Date(0);\n        tMax = input.timeMax ? new Date(input.timeMax) : new Date();\n    }\n    const envs = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.envelope.findMany({\n        where: {\n            active: true\n        },\n        orderBy: {\n            createdAt: \"asc\"\n        }\n    });\n    const ids = envs.map((e)=>e.id);\n    if (ids.length === 0) return [];\n    const dist = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.transactionAllocation.groupBy({\n        by: [\n            \"envelopeId\"\n        ],\n        where: useWindow ? {\n            envelopeId: {\n                in: ids\n            },\n            transaction: {\n                kind: \"DIST\",\n                at: {\n                    gte: tMin,\n                    lte: tMax\n                }\n            }\n        } : {\n            envelopeId: {\n                in: ids\n            },\n            transaction: {\n                kind: \"DIST\"\n            }\n        },\n        _sum: {\n            amount: true\n        }\n    });\n    const outs = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.transactionAllocation.groupBy({\n        by: [\n            \"envelopeId\"\n        ],\n        where: useWindow ? {\n            envelopeId: {\n                in: ids\n            },\n            transaction: {\n                kind: \"OUT\",\n                at: {\n                    gte: tMin,\n                    lte: tMax\n                }\n            }\n        } : {\n            envelopeId: {\n                in: ids\n            },\n            transaction: {\n                kind: \"OUT\"\n            }\n        },\n        _sum: {\n            amount: true\n        }\n    });\n    const outTxPairs = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.transactionAllocation.groupBy({\n        by: [\n            \"envelopeId\",\n            \"transactionId\"\n        ],\n        where: useWindow ? {\n            envelopeId: {\n                in: ids\n            },\n            transaction: {\n                kind: \"OUT\",\n                at: {\n                    gte: tMin,\n                    lte: tMax\n                }\n            }\n        } : {\n            envelopeId: {\n                in: ids\n            },\n            transaction: {\n                kind: \"OUT\"\n            }\n        }\n    });\n    const outCountMap = new Map();\n    outTxPairs.forEach((r)=>{\n        outCountMap.set(r.envelopeId, (outCountMap.get(r.envelopeId) || 0) + 1);\n    });\n    const distMap = new Map(dist.map((d)=>[\n            d.envelopeId,\n            d._sum.amount ?? 0\n        ]));\n    const outMap = new Map(outs.map((o)=>[\n            o.envelopeId,\n            o._sum.amount ?? 0\n        ]));\n    const merged = envs.map((e)=>{\n        const allocated = distMap.get(e.id) ?? 0;\n        const spent = outMap.get(e.id) ?? 0;\n        // remaining = budgetTarget (if present) OR allocated, minus spent\n        const remaining = (e.budgetTarget ?? allocated) - spent;\n        const outCount = outCountMap.get(e.id) ?? 0;\n        return {\n            envelopeId: e.id,\n            name: e.name,\n            emoji: e.emoji ?? null,\n            protected: e.protected,\n            budgetTarget: e.budgetTarget ?? null,\n            allocated,\n            spent,\n            remaining,\n            outCount\n        };\n    });\n    return merged;\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__.ensureServerEntryExports)([\n    getEnvelopesWithStats\n]);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(getEnvelopesWithStats, \"40324aebbf7e747e731eb7bb02015237314be1c552\", null);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL3NyYy9zZXJ2ZXIvYWN0aW9ucy9lbnZlbG9wZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQ3NDO0FBQ0c7QUFjekMsNEdBQTRHO0FBQ3JHLGVBQWVFLHNCQUFzQkMsS0FBOEM7SUFDeEYsTUFBTUYsc0RBQVdBLENBQUM7UUFBQztRQUFXO1FBQVU7S0FBVTtJQUVsRCxJQUFJRyxZQUFZO0lBQ2hCLElBQUlDLE9BQXlCQztJQUM3QixJQUFJQyxPQUF5QkQ7SUFDN0IsSUFBSUgsU0FBVUEsQ0FBQUEsTUFBTUssT0FBTyxJQUFJTCxNQUFNTSxPQUFPLEdBQUU7UUFDNUNMLFlBQVk7UUFDWkMsT0FBT0YsTUFBTUssT0FBTyxHQUFHLElBQUlFLEtBQUtQLE1BQU1LLE9BQU8sSUFBSSxJQUFJRSxLQUFLO1FBQzFESCxPQUFPSixNQUFNTSxPQUFPLEdBQUcsSUFBSUMsS0FBS1AsTUFBTU0sT0FBTyxJQUFJLElBQUlDO0lBQ3ZEO0lBRUEsTUFBTUMsT0FBTyxNQUFNWCwrQ0FBTUEsQ0FBQ1ksUUFBUSxDQUFDQyxRQUFRLENBQUM7UUFBRUMsT0FBTztZQUFFQyxRQUFRO1FBQUs7UUFBR0MsU0FBUTtZQUFFQyxXQUFXO1FBQU07SUFBRTtJQUNwRyxNQUFNQyxNQUFNUCxLQUFLUSxHQUFHLENBQUNDLENBQUFBLElBQUdBLEVBQUVDLEVBQUU7SUFDNUIsSUFBR0gsSUFBSUksTUFBTSxLQUFHLEdBQUcsT0FBTyxFQUFFO0lBRTVCLE1BQU1DLE9BQU8sTUFBTXZCLCtDQUFNQSxDQUFDd0IscUJBQXFCLENBQUNDLE9BQU8sQ0FBQztRQUN0REMsSUFBSTtZQUFDO1NBQWE7UUFDbEJaLE9BQU9WLFlBQVk7WUFBRXVCLFlBQVk7Z0JBQUVDLElBQUlWO1lBQUk7WUFBR1csYUFBYTtnQkFBRUMsTUFBTTtnQkFBUUMsSUFBSTtvQkFBRUMsS0FBSzNCO29CQUFNNEIsS0FBSzFCO2dCQUFLO1lBQUU7UUFBRSxJQUFJO1lBQUVvQixZQUFZO2dCQUFFQyxJQUFJVjtZQUFJO1lBQUdXLGFBQWE7Z0JBQUVDLE1BQU07WUFBTztRQUFFO1FBQ3ZLSSxNQUFNO1lBQUVDLFFBQVE7UUFBSztJQUN2QjtJQUVBLE1BQU1DLE9BQU8sTUFBTXBDLCtDQUFNQSxDQUFDd0IscUJBQXFCLENBQUNDLE9BQU8sQ0FBQztRQUN0REMsSUFBSTtZQUFDO1NBQWE7UUFDbEJaLE9BQU9WLFlBQVk7WUFBRXVCLFlBQVk7Z0JBQUVDLElBQUlWO1lBQUk7WUFBR1csYUFBYTtnQkFBRUMsTUFBTTtnQkFBT0MsSUFBSTtvQkFBRUMsS0FBSzNCO29CQUFNNEIsS0FBSzFCO2dCQUFLO1lBQUU7UUFBRSxJQUFJO1lBQUVvQixZQUFZO2dCQUFFQyxJQUFJVjtZQUFJO1lBQUdXLGFBQWE7Z0JBQUVDLE1BQU07WUFBTTtRQUFFO1FBQ3JLSSxNQUFNO1lBQUVDLFFBQVE7UUFBSztJQUN2QjtJQUVBLE1BQU1FLGFBQWEsTUFBTXJDLCtDQUFNQSxDQUFDd0IscUJBQXFCLENBQUNDLE9BQU8sQ0FBQztRQUM1REMsSUFBSTtZQUFDO1lBQWM7U0FBZ0I7UUFDbkNaLE9BQU9WLFlBQVk7WUFBRXVCLFlBQVk7Z0JBQUVDLElBQUlWO1lBQUk7WUFBR1csYUFBYTtnQkFBRUMsTUFBTTtnQkFBT0MsSUFBSTtvQkFBRUMsS0FBSzNCO29CQUFNNEIsS0FBSzFCO2dCQUFLO1lBQUU7UUFBRSxJQUFJO1lBQUVvQixZQUFZO2dCQUFFQyxJQUFJVjtZQUFJO1lBQUdXLGFBQWE7Z0JBQUVDLE1BQU07WUFBTTtRQUFFO0lBQ3ZLO0lBQ0EsTUFBTVEsY0FBYyxJQUFJQztJQUN4QkYsV0FBV0csT0FBTyxDQUFDQyxDQUFBQTtRQUFLSCxZQUFZSSxHQUFHLENBQUNELEVBQUVkLFVBQVUsRUFBRSxDQUFDVyxZQUFZSyxHQUFHLENBQUNGLEVBQUVkLFVBQVUsS0FBRyxLQUFHO0lBQUc7SUFFNUYsTUFBTWlCLFVBQVUsSUFBSUwsSUFBSWhCLEtBQUtKLEdBQUcsQ0FBQzBCLENBQUFBLElBQUc7WUFBQ0EsRUFBRWxCLFVBQVU7WUFBRWtCLEVBQUVYLElBQUksQ0FBQ0MsTUFBTSxJQUFJO1NBQUU7SUFDdEUsTUFBTVcsU0FBUyxJQUFJUCxJQUFJSCxLQUFLakIsR0FBRyxDQUFDNEIsQ0FBQUEsSUFBRztZQUFDQSxFQUFFcEIsVUFBVTtZQUFFb0IsRUFBRWIsSUFBSSxDQUFDQyxNQUFNLElBQUk7U0FBRTtJQUVyRSxNQUFNYSxTQUEwQnJDLEtBQUtRLEdBQUcsQ0FBQ0MsQ0FBQUE7UUFDdkMsTUFBTTZCLFlBQVlMLFFBQVFELEdBQUcsQ0FBQ3ZCLEVBQUVDLEVBQUUsS0FBSztRQUN2QyxNQUFNNkIsUUFBUUosT0FBT0gsR0FBRyxDQUFDdkIsRUFBRUMsRUFBRSxLQUFLO1FBQ2xDLGtFQUFrRTtRQUNsRSxNQUFNOEIsWUFBWSxDQUFFLEVBQVdDLFlBQVksSUFBSUgsU0FBUSxJQUFNQztRQUM3RCxNQUFNRyxXQUFXZixZQUFZSyxHQUFHLENBQUN2QixFQUFFQyxFQUFFLEtBQUs7UUFDMUMsT0FBTztZQUFFTSxZQUFZUCxFQUFFQyxFQUFFO1lBQUVpQyxNQUFNbEMsRUFBRWtDLElBQUk7WUFBRUMsT0FBT25DLEVBQUVtQyxLQUFLLElBQUk7WUFBTUMsV0FBV3BDLEVBQUVvQyxTQUFTO1lBQUVKLGNBQWMsRUFBV0EsWUFBWSxJQUFJO1lBQU1IO1lBQVdDO1lBQU9DO1lBQVdFO1FBQVM7SUFDaEw7SUFFQSxPQUFPTDtBQUNUOzs7SUFoRHNCOUM7O0FBQUFBLDBGQUFBQSxDQUFBQSIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxCQzI0MVxcTXVzaWNcXGZpbmFuY2UtYXBwLXYxLW1haW5cXGZpbmFuY2UtYXBwLXYxLW1haW5cXHNyY1xcc2VydmVyXFxhY3Rpb25zXFxlbnZlbG9wZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5pbXBvcnQgeyByZXF1aXJlUm9sZSB9IGZyb20gXCJAL2xpYi9hdXRoXCI7XG5cbmV4cG9ydCB0eXBlIEVudmVsb3BlU3RhdHMgPSB7XG4gIGVudmVsb3BlSWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbW9qaTogc3RyaW5nIHwgbnVsbDtcbiAgcHJvdGVjdGVkOiBib29sZWFuO1xuICBidWRnZXRUYXJnZXQ6IG51bWJlciB8IG51bGw7XG4gIGFsbG9jYXRlZDogbnVtYmVyOyAvLyBESVNUXG4gIHNwZW50OiBudW1iZXI7IC8vIE9VVFxuICByZW1haW5pbmc6IG51bWJlcjtcbiAgb3V0Q291bnQ6IG51bWJlcjtcbn07XG5cbi8vIFJldG91cm5lIGxlcyBzdGF0cyBwYXIgZW52ZWxvcHBlLiBTaSB0aW1lTWluL3RpbWVNYXggZm91cm5pcywgZmlsdHJlIHN1ciBww6lyaW9kZSwgc2lub24gYWdyw6lnYXQgYWxsLXRpbWUuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW52ZWxvcGVzV2l0aFN0YXRzKGlucHV0PzogeyB0aW1lTWluPzogc3RyaW5nOyB0aW1lTWF4Pzogc3RyaW5nIH0pe1xuICBhd2FpdCByZXF1aXJlUm9sZShbXCJvcGVyYXRvclwiLFwibWFuYWdlclwiLFwiYXVkaXRvclwiXSk7XG5cbiAgbGV0IHVzZVdpbmRvdyA9IGZhbHNlO1xuICBsZXQgdE1pbjogRGF0ZSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgbGV0IHRNYXg6IERhdGUgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIGlmIChpbnB1dCAmJiAoaW5wdXQudGltZU1pbiB8fCBpbnB1dC50aW1lTWF4KSl7XG4gICAgdXNlV2luZG93ID0gdHJ1ZTtcbiAgICB0TWluID0gaW5wdXQudGltZU1pbiA/IG5ldyBEYXRlKGlucHV0LnRpbWVNaW4pIDogbmV3IERhdGUoMCk7XG4gICAgdE1heCA9IGlucHV0LnRpbWVNYXggPyBuZXcgRGF0ZShpbnB1dC50aW1lTWF4KSA6IG5ldyBEYXRlKCk7XG4gIH1cblxuICBjb25zdCBlbnZzID0gYXdhaXQgcHJpc21hLmVudmVsb3BlLmZpbmRNYW55KHsgd2hlcmU6IHsgYWN0aXZlOiB0cnVlIH0sIG9yZGVyQnk6eyBjcmVhdGVkQXQ6IFwiYXNjXCIgfSB9KTtcbiAgY29uc3QgaWRzID0gZW52cy5tYXAoZT0+ZS5pZCk7XG4gIGlmKGlkcy5sZW5ndGg9PT0wKSByZXR1cm4gW10gYXMgRW52ZWxvcGVTdGF0c1tdO1xuXG4gIGNvbnN0IGRpc3QgPSBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb25BbGxvY2F0aW9uLmdyb3VwQnkoe1xuICAgIGJ5OiBbXCJlbnZlbG9wZUlkXCJdLFxuICAgIHdoZXJlOiB1c2VXaW5kb3cgPyB7IGVudmVsb3BlSWQ6IHsgaW46IGlkcyB9LCB0cmFuc2FjdGlvbjogeyBraW5kOiBcIkRJU1RcIiwgYXQ6IHsgZ3RlOiB0TWluLCBsdGU6IHRNYXggfSB9IH0gOiB7IGVudmVsb3BlSWQ6IHsgaW46IGlkcyB9LCB0cmFuc2FjdGlvbjogeyBraW5kOiBcIkRJU1RcIiB9IH0sXG4gICAgX3N1bTogeyBhbW91bnQ6IHRydWUgfVxuICB9KTtcblxuICBjb25zdCBvdXRzID0gYXdhaXQgcHJpc21hLnRyYW5zYWN0aW9uQWxsb2NhdGlvbi5ncm91cEJ5KHtcbiAgICBieTogW1wiZW52ZWxvcGVJZFwiXSxcbiAgICB3aGVyZTogdXNlV2luZG93ID8geyBlbnZlbG9wZUlkOiB7IGluOiBpZHMgfSwgdHJhbnNhY3Rpb246IHsga2luZDogXCJPVVRcIiwgYXQ6IHsgZ3RlOiB0TWluLCBsdGU6IHRNYXggfSB9IH0gOiB7IGVudmVsb3BlSWQ6IHsgaW46IGlkcyB9LCB0cmFuc2FjdGlvbjogeyBraW5kOiBcIk9VVFwiIH0gfSxcbiAgICBfc3VtOiB7IGFtb3VudDogdHJ1ZSB9XG4gIH0pO1xuXG4gIGNvbnN0IG91dFR4UGFpcnMgPSBhd2FpdCBwcmlzbWEudHJhbnNhY3Rpb25BbGxvY2F0aW9uLmdyb3VwQnkoe1xuICAgIGJ5OiBbXCJlbnZlbG9wZUlkXCIsIFwidHJhbnNhY3Rpb25JZFwiXSxcbiAgICB3aGVyZTogdXNlV2luZG93ID8geyBlbnZlbG9wZUlkOiB7IGluOiBpZHMgfSwgdHJhbnNhY3Rpb246IHsga2luZDogXCJPVVRcIiwgYXQ6IHsgZ3RlOiB0TWluLCBsdGU6IHRNYXggfSB9IH0gOiB7IGVudmVsb3BlSWQ6IHsgaW46IGlkcyB9LCB0cmFuc2FjdGlvbjogeyBraW5kOiBcIk9VVFwiIH0gfSxcbiAgfSk7XG4gIGNvbnN0IG91dENvdW50TWFwID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgb3V0VHhQYWlycy5mb3JFYWNoKHI9Pnsgb3V0Q291bnRNYXAuc2V0KHIuZW52ZWxvcGVJZCwgKG91dENvdW50TWFwLmdldChyLmVudmVsb3BlSWQpfHwwKSsxKSB9KTtcblxuICBjb25zdCBkaXN0TWFwID0gbmV3IE1hcChkaXN0Lm1hcChkPT5bZC5lbnZlbG9wZUlkLCBkLl9zdW0uYW1vdW50ID8/IDBdKSk7XG4gIGNvbnN0IG91dE1hcCA9IG5ldyBNYXAob3V0cy5tYXAobz0+W28uZW52ZWxvcGVJZCwgby5fc3VtLmFtb3VudCA/PyAwXSkpO1xuXG4gIGNvbnN0IG1lcmdlZDogRW52ZWxvcGVTdGF0c1tdID0gZW52cy5tYXAoZT0+e1xuICAgIGNvbnN0IGFsbG9jYXRlZCA9IGRpc3RNYXAuZ2V0KGUuaWQpID8/IDA7XG4gICAgY29uc3Qgc3BlbnQgPSBvdXRNYXAuZ2V0KGUuaWQpID8/IDA7XG4gICAgLy8gcmVtYWluaW5nID0gYnVkZ2V0VGFyZ2V0IChpZiBwcmVzZW50KSBPUiBhbGxvY2F0ZWQsIG1pbnVzIHNwZW50XG4gICAgY29uc3QgcmVtYWluaW5nID0gKCAoZSBhcyBhbnkpLmJ1ZGdldFRhcmdldCA/PyBhbGxvY2F0ZWQgKSAtIHNwZW50O1xuICAgIGNvbnN0IG91dENvdW50ID0gb3V0Q291bnRNYXAuZ2V0KGUuaWQpID8/IDA7XG4gICAgcmV0dXJuIHsgZW52ZWxvcGVJZDogZS5pZCwgbmFtZTogZS5uYW1lLCBlbW9qaTogZS5lbW9qaSA/PyBudWxsLCBwcm90ZWN0ZWQ6IGUucHJvdGVjdGVkLCBidWRnZXRUYXJnZXQ6IChlIGFzIGFueSkuYnVkZ2V0VGFyZ2V0ID8/IG51bGwsIGFsbG9jYXRlZCwgc3BlbnQsIHJlbWFpbmluZywgb3V0Q291bnQgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIG1lcmdlZDtcbn1cblxuXG4iXSwibmFtZXMiOlsicHJpc21hIiwicmVxdWlyZVJvbGUiLCJnZXRFbnZlbG9wZXNXaXRoU3RhdHMiLCJpbnB1dCIsInVzZVdpbmRvdyIsInRNaW4iLCJ1bmRlZmluZWQiLCJ0TWF4IiwidGltZU1pbiIsInRpbWVNYXgiLCJEYXRlIiwiZW52cyIsImVudmVsb3BlIiwiZmluZE1hbnkiLCJ3aGVyZSIsImFjdGl2ZSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJpZHMiLCJtYXAiLCJlIiwiaWQiLCJsZW5ndGgiLCJkaXN0IiwidHJhbnNhY3Rpb25BbGxvY2F0aW9uIiwiZ3JvdXBCeSIsImJ5IiwiZW52ZWxvcGVJZCIsImluIiwidHJhbnNhY3Rpb24iLCJraW5kIiwiYXQiLCJndGUiLCJsdGUiLCJfc3VtIiwiYW1vdW50Iiwib3V0cyIsIm91dFR4UGFpcnMiLCJvdXRDb3VudE1hcCIsIk1hcCIsImZvckVhY2giLCJyIiwic2V0IiwiZ2V0IiwiZGlzdE1hcCIsImQiLCJvdXRNYXAiLCJvIiwibWVyZ2VkIiwiYWxsb2NhdGVkIiwic3BlbnQiLCJyZW1haW5pbmciLCJidWRnZXRUYXJnZXQiLCJvdXRDb3VudCIsIm5hbWUiLCJlbW9qaSIsInByb3RlY3RlZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(action-browser)/./src/server/actions/envelopes.ts\n");

/***/ })

};
;